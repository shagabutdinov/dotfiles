"3.8.2 (created: 2014/02/13 23:52:43)

set hintchars=abcdefghijklmnopqrstuvwxyz
source! /home/leo/.vimperatorrc.local
set gui=none
set editor=subl3
" vim: set ft=vimperator:

set focuscontent
map Q :tabonly<CR>
colorscheme darkness
highlight Hint font-size:12px; color:white; background-color:black; padding:2px; text-transform:uppercase; border-radius:5px; border:1px solid white;

:inoremap <C-a> <Ins><C-a><Ins>
inoremap <ESC> <ESC> | :js content.document.querySelector(':focus') && window.setTimeout(function() { content.document.querySelector(':selected').blur() })<CR>

noremap <C-e> <C-u>
noremap gb <C-o>
noremap gs gf
noremap gf <C-i>

noremap I :js toggle_bottombar('on')<CR><Insert>
noremap ia :redmineOpenAllIssues<CR>
noremap ic :redmineSetIssueStatus 5<CR> | :redmineSetAssignee 4<CR> | :redmineSaveIssue<CR>
noremap ij :redmineSetIssueStatus 6<CR> | :redmineSetAssignee 4<CR> | :redmineSaveIssue<CR>
noremap ie :redmineSetIssueStatus 3<CR> | :redmineReturnIssue<CR> | :redmineShowComment<CR> | :redmineFocusComment<CR>
noremap it :redmineShowComment<CR> | :redmineFocusComment<CR>
noremap ir :redmineReplyIssue 5<CR>
noremap is :redmineSaveIssue<CR>
noremap iR :js content.location.href = content.location.href.replace(/\/projects\/(.*?)\/.*/, '/projects/$1/time_entries/report?utf8=✓&criteria[]=user&f[]=spent_on&op[spent_on]=>t-&v[spent_on][]=14&f[]=&c[]=project&c[]=spent_on&c[]=user&c[]=activity&c[]=issue&c[]=comments&c[]=hours&columns=day&criteria[]=')<CR>

noremap xR :source .vimperatorrc<CR>
noremap E :js toggle_bottombar('on')<CR> | :open http://rm.idfly.ru/projects/
noremap e :js toggle_bottombar('on')<CR> | :open http://rm.idfly.ru/issues/
noremap xt :open http://rm.idfly.ru/projects/todo-shagabutdinov-idfly-ru/issues?utf8=✓&set_filter=1&f[]=status_id&op[status_id]=o&f[]=tracker_id&op[tracker_id]==&v[tracker_id][]=5&f[]=assigned_to_id&op[assigned_to_id]==&v[assigned_to_id][]=me&f[]=&c[]=tracker&c[]=status&c[]=priority&c[]=subject&c[]=assigned_to&c[]=due_date&group_by=<CR>
noremap im :open http://rm.idfly.ru/issues?query_id=2<CR>
noremap il /На проверку<CR><CR>
noremap iq /В работе<CR><CR>
noremap <A-q> :tabprevious<CR>
noremap <A-w> :tabnext<CR>

silent qmark y http://youtube.com/

noremap xc :silent execute "!chromium \"" + content.location.href + "\" &"<CR>

set hto=300

"javascript to hide statusbar
noremap <silent> q :js toggle_bottombar()<CR>
noremap : :js toggle_bottombar('on')<CR>:
noremap o :js toggle_bottombar('on')<CR>o
noremap O :js toggle_bottombar('on')<CR>O
noremap t :js toggle_bottombar('on')<CR>t
noremap T :js toggle_bottombar('on')<CR>t
noremap y :js toggle_bottombar('on')<CR>y
noremap / :js toggle_bottombar('on')<CR>/
cnoremap <CR> <CR>:js toggle_bottombar('off')<CR>
cnoremap <Esc> <Esc>:js toggle_bottombar('off')<CR>

:js << EOF
function toggle_bottombar(p) {
    var bb = document.getElementById('liberator-bottombar');
    if (!bb)
        return;
    if (p == 'on'){
        bb.style.height = '';
        bb.style.overflow = '';
        return;
    }
    if (p == 'off'){
        bb.style.height = '0px';
        bb.style.overflow = 'hidden';
        return;
    }
    bb.style.height = (bb.style.height == '') ? '0px' : '';
    bb.style.overflow = (bb.style.height == '') ? '' : 'hidden';
}
EOF
